!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ionic/angular"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-ionic-image-viewer",["exports","@angular/core","@ionic/angular","@angular/common"],t):t((e=e||self)["ngx-ionic-image-viewer"]={},e.ng.core,e["@ionic/angular"],e.ng.common)}(this,(function(e,t,o,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var r=function(){return(r=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function i(e,t,o,n){return new(o||(o=Promise))((function(r,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new o((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function s(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var a=function(){function e(){}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),c=function(){function e(e){this.modalController=e,this.defaultSlideOptions={centeredSlides:!0,passiveListeners:!1,zoom:{enabled:!0}},this.options={},this.swipeState={phase:"init",direction:"none",swipeType:"none",startX:0,startY:0,distance:0,distanceX:0,distanceY:0,threshold:150,restraint:100,allowedTime:500,elapsedTime:0,startTime:0}}return e.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.options=r({},this.defaultSlideOptions,this.slideOptions),this.src=this.srcHighRes||this.src,this.setStyle(),this.setScheme(this.scheme),this.initSwipeToClose(this.swipeToClose),[4,this.slides.getSwiper()];case 1:return e.sent().appendSlide("<ion-slide><img alt="+this.alt+' src="'+this.src+'" (error)="(onError($event))"/></ion-slide>'),[2]}}))}))},e.prototype.setStyle=function(){var e=document.querySelector(".modal-fullscreen");e.style.setProperty("--height","100%"),e.style.setProperty("--width","100%"),e.style.setProperty("--border-radius","0")},e.prototype.setScheme=function(e){if("auto"!==e){var t=document.querySelector(".modal-fullscreen");"light"===this.scheme&&(t.style.setProperty("--ion-background-color","#ffffff"),t.style.setProperty("--ion-background-color-rgb","255, 255, 255"),t.style.setProperty("--ion-text-color","#000"),t.style.setProperty("--ion-text-color-rgb","0,0,0")),"dark"===this.scheme&&(t.classList.contains("ios")?(t.style.setProperty("--ion-background-color","#000000"),t.style.setProperty("--ion-background-color-rgb","0, 0, 0")):(t.style.setProperty("--ion-background-color","#121212"),t.style.setProperty("--ion-background-color-rgb","18,18,18")),t.style.setProperty("--ion-text-color","#ffffff"),t.style.setProperty("--ion-text-color-rgb","255,255,255"))}},e.prototype.initSwipeToClose=function(e){var t=this;if(void 0===e&&(e=!0),e){var o=document.querySelector("ion-modal");o.addEventListener("mousedown",(function(e){return t.swipeStart(e)}),!0),o.addEventListener("mousemove",(function(e){return t.swipeMove(e)}),!0),o.addEventListener("mouseup",(function(e){return t.swipeEnd(e)}),!0),o.addEventListener("touchstart",(function(e){return t.swipeStart(e)}),!0),o.addEventListener("touchmove",(function(e){return t.swipeMove(e)}),!0),o.addEventListener("touchend",(function(e){return t.swipeEnd(e)}),!0),this.modalController.getTop().then((function(e){e.onWillDismiss().then((function(){document.removeEventListener("mousedown",t.swipeStart,!0),document.removeEventListener("mousemove",t.swipeMove,!0),document.removeEventListener("mouseup",t.swipeMove,!0),document.removeEventListener("touchstart",t.swipeStart,!0),document.removeEventListener("touchmove",t.swipeMove,!0),document.removeEventListener("touchend",t.swipeMove,!0)}))}))}},e.prototype.swipeStart=function(e){var t="touchstart"===e.type?e.changedTouches[0]:e,o=t.pageX,n=t.pageY;this.swipeState=r({},this.swipeState,{phase:"start",direction:"none",distance:0,startX:o,startY:n,startTime:(new Date).getTime()})},e.prototype.swipeMove=function(e){if("none"!==this.swipeState.phase){var t,o,n="touchmove"===e.type?e.changedTouches[0]:e,i=n.pageX,s=n.pageY,a=i-this.swipeState.startX,c=s-this.swipeState.startY;Math.abs(a)>Math.abs(c)?(t=a<0?"left":"right",o=a):(t=c<0?"up":"down",o=c),this.swipeState=r({},this.swipeState,{phase:"move",direction:t,distance:o,distanceX:a,distanceY:c}),e.preventDefault()}},e.prototype.swipeEnd=function(e){if("none"!==this.swipeState.phase){var t,o=this.swipeState,n=o.allowedTime,i=o.direction,s=o.restraint,a=o.startTime,c=o.threshold,l=o.distanceX,p=o.distanceY;return(new Date).getTime()-a<=n&&(Math.abs(l)>=c&&Math.abs(p)<=s?t=i:Math.abs(p)>=c&&Math.abs(l)<=s&&(t=i)),this.swipeState=r({},this.swipeState,{phase:"end",swipeType:t}),"down"===t?this.closeModal():void 0}},e.prototype.onError=function(e){console.log("TCL: ViewerModalComponent -> onError -> error",e),this.srcFallback&&(this.src=this.srcFallback)},e.prototype.closeModal=function(){this.modalController.dismiss()},e.decorators=[{type:t.Component,args:[{selector:"ion-viewer-modal",template:'<ion-header [ngClass]="{ \'no-title\': title.length <= 0 }">\n  <ion-toolbar>\n    <ion-buttons slot="primary">\n      <ion-button (click)="closeModal()">\n        <ion-icon slot="icon-only" name="close"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>{{ title }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [forceOverscroll]="false">\n  <ion-slides [options]="options" #sliderRef>\n    \x3c!-- <ion-slide>\n      <div class="swiper-zoom-container">\n        <img [alt]="this.alt" [src]="this.src" (error)="onError($event)" />\n      </div>\n    </ion-slide> --\x3e\n  </ion-slides>\n</ion-content>\n\n<ion-footer [ngClass]="{ \'no-text\': text.length <= 0 }">\n  <ion-toolbar class="ion-text-center">\n    <ion-text>{{ text }}</ion-text>\n  </ion-toolbar>\n</ion-footer>\n',styles:["ion-slides{--height:100%;height:100%}ion-toolbar{--border-style:none;--background:rgba(var(--ion-background-color-rgb, (255, 255, 255)), 0.6);background:rgba(var(--ion-background-color-rgb,255,255,255),.6)}ion-header{opacity:1;position:absolute}ion-header.no-title:after{content:none}ion-header.no-title ion-toolbar{--background:rgba(0, 0, 0, 0);background:rgba(0,0,0,0)}ion-footer{position:absolute;bottom:0}ion-footer.no-text:before{content:none}ion-footer.no-text ion-toolbar{--background:rgba(0, 0, 0, 0);background:rgba(0,0,0,0)}"]}]}],e.ctorParameters=function(){return[{type:o.ModalController}]},e.propDecorators={alt:[{type:t.Input}],scheme:[{type:t.Input}],slideOptions:[{type:t.Input}],src:[{type:t.Input}],srcFallback:[{type:t.Input}],srcHighRes:[{type:t.Input}],swipeToClose:[{type:t.Input}],text:[{type:t.Input}],title:[{type:t.Input}],slides:[{type:t.ViewChild,args:["sliderRef",{static:!0}]}]},e}();var l=function(){function e(e){this.modalController=e}return e.prototype.viewImage=function(e,t,o,n,r,a,l,p){return void 0===t&&(t=""),void 0===o&&(o=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===a&&(a="auto"),void 0===l&&(l={}),void 0===p&&(p=!0),i(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,this.modalController.create({component:c,componentProps:{src:e,srcFallback:t,srcHighRes:o,title:n,text:r,scheme:a,slideOptions:l,swipeToClose:p},cssClass:"modal-fullscreen",keyboardClose:!0,showBackdrop:!0})];case 1:return[4,i.sent().present()];case 2:return[2,i.sent()]}}))}))},e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"ion-img-viewer",template:'<img\n  [alt]="alt"\n  [src]="src"\n  (click)="viewImage(src, srcFallback, srcHighRes, title, text, scheme, slideOptions, swipeToClose)"\n  (error)="src = srcFallback"\n/>\n',encapsulation:t.ViewEncapsulation.Emulated,styles:["\n      :host {\n        display: block;\n      }\n    "]}]}],e.ctorParameters=function(){return[{type:o.ModalController}]},e.propDecorators={alt:[{type:t.Input}],scheme:[{type:t.Input}],slideOptions:[{type:t.Input}],src:[{type:t.Input}],srcFallback:[{type:t.Input}],srcHighRes:[{type:t.Input}],swipeToClose:[{type:t.Input}],text:[{type:t.Input}],title:[{type:t.Input}]},e}();var p=function(){function e(e,t,o){this.el=e,this.renderer=t,this.modalController=o}return e.prototype.onClick=function(){this.viewImage(this.src,this.srcFallback,this.srcHighRes,this.title,this.text,this.scheme,this.slideOptions,this.swipeToClose)},e.prototype.onError=function(e){this.src!==this.el.nativeElement.src&&(this.src=this.el.nativeElement.src),this.srcFallback&&this.renderer.setAttribute(this.el.nativeElement,"src",this.srcFallback)},e.prototype.ngOnInit=function(){this.el.nativeElement.hasAttribute("src")||this.renderer.setAttribute(this.el.nativeElement,"src",this.src)},e.prototype.viewImage=function(e,t,o,n,r,a,l,p){return void 0===t&&(t=""),void 0===o&&(o=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===a&&(a="auto"),void 0===l&&(l={}),void 0===p&&(p=!0),i(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,this.modalController.create({component:c,componentProps:{src:e,srcFallback:t,srcHighRes:o,title:n,text:r,scheme:a,slideOptions:l,swipeToClose:p},cssClass:"modal-fullscreen",keyboardClose:!0,showBackdrop:!0})];case 1:return[4,i.sent().present()];case 2:return[2,i.sent()]}}))}))},e.decorators=[{type:t.Directive,args:[{selector:"[ionImgViewer]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:o.ModalController}]},e.propDecorators={scheme:[{type:t.Input}],slideOptions:[{type:t.Input}],src:[{type:t.Input}],srcFallback:[{type:t.Input}],srcHighRes:[{type:t.Input}],swipeToClose:[{type:t.Input}],text:[{type:t.Input}],title:[{type:t.Input}],onClick:[{type:t.HostListener,args:["click"]}],onError:[{type:t.HostListener,args:["error",["$event"]]}]},e}();var u=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[l,c,p],imports:[n.CommonModule,o.IonicModule],entryComponents:[c],exports:[l,c,p]}]}],e}();e.NgxIonicImageViewerComponent=l,e.NgxIonicImageViewerDirective=p,e.NgxIonicImageViewerModule=u,e.NgxIonicImageViewerService=a,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-ionic-image-viewer.umd.min.js.map